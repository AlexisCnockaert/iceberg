I perform a commit. 
If publish flag us true, I also perform a push.