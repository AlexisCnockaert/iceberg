I perform a commit. 
If publish flag is true, I also perform a push.